<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>배열의 메서드 활용</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
            }

            h1,
            h2 {
                text-align: center;
            }

            .controler {
                padding: 15px;
                width: 100%;
                text-align: center;
            }

            .cont ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                margin: 0;
                padding: 0;
                list-style: none;
                overflow: hidden;
            }

            .cont li {
                width: 100px;
                height: 100px;
                border: 2px solid red;
                border-radius: 50%;
                margin: 10px;
                text-align: center;
                line-height: 100px;
                font-size: 25px;
                white-space: nowrap;
            }

            /* 배열정보 보이기 */
            .showit {
                padding: 15px;
                border: 4px dotted blue;
                text-align: center;
                font-size: 20px;
                font-weight: bold;
            }

            /* 버튼 */
            .mbtn,
            #sel {
                font-size: 20px;
                padding: 10px;
                border-radius: 10px;
                margin-bottom: 20px;
            }
            /* 입력양식 */
            label,
            input,
            select {
                font-size: 20px;
            }
        </style>
        <script>
            const qs = x => document.querySelector(x);
            const qsa = x => document.querySelectorAll(x);
            /* 콘솔 찍기 함수 */
            const cg = x => console.log(x);

            /////////// 로드구역 ///////////////////////////
            window.addEventListener("DOMContentLoaded", () => {
                console.log("로딩완료!");

                /* 1. 배열변수 선언과 할당 */
                const fruit = ["배", "사과", "용과", "딸기"];

                /* 2. 과일명과 과일 이미지 명을 매치 -> 객체*/
                const frObj = {
                    배: "fruits_01",
                    사과: "fruits_02",
                    용과: "fruits_14",
                    딸기: "fruits_09",
                    두리안: "fruits_17",
                    바나나: "fruits_15",
                    수박: "fruits_12",
                    파인애플: "fruits_13",
                    망고: "fruits_24",
                    오렌지: "fruits_03",
                    체리: "fruits_05",
                    멜론: "fruits_11",
                    블루베리: "fruits_20",
                    레몬: "fruits_04",
                };

                /* 3. 대상요소 */
                /* 1) 배열정보 출력 */
                const showit = qs(".showit");
                /* 2) 배열로 이미지 출력 .cont */
                const cont = qs(".cont");
                /* 3) 조작버튼 요소들 :.mbtn */
                const mbtn = qsa(".mbtn");
                /* 4) 선택박스 #sel */
                const sel = qs("#sel");
                console.log(showit, cont, mbtn, sel);

                /* 4. 처음배열 출력하기 */
                /* 배열 출력함수 만들기 */
                const showArr = () => {
                    showit.innerText = fruit.join("*");
                };

                /* 처음 배열정보 호출하기 */
                showArr();

                /* 5. 과일주세요 버튼 클릭시 배열정보로 과일박스 만들고 이미지 출력하기 */
                mbtn[0].onclick = ()=>{
                    /* 1. 호출확인 */
                    // cg("과일주세요");

                    /* 2. 변경내용: 배열의 과일만큼 ul>li를 만들어서 html로 cont에 출력하기 */
                    let hcode = "<ul>";
                    /* forEach() 메서드로 배열만큼 돌아서 li만들기 */
                    /* frObj[val] -> 배열값과 같은 이름의 객체값 가져오기 */
                    fruit.forEach((val)=>{
                        hcode += `
                            <li style="background: url(addimg/${frObj[val]}.png) no-repeat center/cover;">
                                ${val}
                            </li>
                        `;
                    });
                    hcode += `</ul>`;

                    /* 화면출력 */
                    cont.innerHTML = hcode;
                };
                
                /* 6. 과일 이미지명 세팅의 객체 속성명으로 과일선택박스(sel) 옵션 세팅하기 */
                /* 선택박스의 데이터를 만드는 것을 데이터 바인딩이라고 함 */
                /* 지역변수화를 하여 세팅 */
                /* 바로실행하는 함수만들기 */
                /*(함수)() -> 자기자신이 바로 실행됨 */
                (()=>{
                    console.log("바로실행 됨");
                    /* 임시변수(코드담기) */
                    let temp ="";
                    /* 객체를위한 for in문 */
                    /* 대상객체: frObj */
                    for(let x in frObj){
                        temp += `<option>${x}</option>`;
                    }
                    sel.innerHTML = temp;
                })();

                /* 7. 뒷배열추가요 버튼 클릭시 현재 선택된 sel 과일을 맨 뒤에 추가함 */
                mbtn[1].onclick = () => {
                    /* 1. 호출확인 */
                    // console.log("뒷배열추가");
                    /* 2. 선택대상의 값을 배열 맨 뒤에 추가하기 */
                    fruit.push(sel.value);

                    /* 3. 배열정보 화면에 출력하기 */
                    showArr();
                    /* 4. 현재배열 선택박스 출력하기*/
                    makeSel();
                };
                
                /* 8. 앞배열추가요 버튼 클릭시 현재 선택된 sel 과일을 맨 앞에 추가함*/
                mbtn[2].onclick = () => {
                    /* 1. 호출확인 */
                    // console.log("앞배열추가");
                    /* 2. 앞배열 추가 */
                    fruit.unshift(sel.value);
                    /* 3. 배열정보 화면에 출력하기 */
                    showArr();
                    /* 4. 현재배열 선택박스 출력하기*/
                    makeSel();
                }
                
                /* 9. 뒷배열삭제요 버튼 클릭시 맨 뒤의 요소를 삭제함 */
                mbtn[3].onclick = ()=>{
                    /* 1. 호출확인 */
                    // console.log("뒷배열삭제");
                    /* 2. 뒷배열삭제 */
                    fruit.pop();
                    /* 3. 배열정보 화면에 출력하기 */
                    showArr();
                    /* 4. 현재배열 선택박스 출력하기*/
                    makeSel();
                }

                /* 10. 앞배열삭제요 버튼 클릭시 맨 앞의 요소를 삭제함 */
                mbtn[4].onclick = ()=>{
                    /* 1. 호출확인 */
                    // console.log("앞배열삭제");
                    /* 2. 앞배열삭제 */
                    fruit.shift();
                    /* 3. 배열정보 화면에 출력하기 */
                    showArr();
                    /* 4. 현재배열 선택박스 출력하기*/
                    makeSel();
                }

                /******************************************************
                    중간배열 지우기 또는 넣기를 위해 현재 배열번호 선택박스와 지울개수를 요소에 세팅하기\
                ******************************************************/

                /* 대상선정 */
                /* 지울배열 선택박스 */
                const anum = qs("#anum");
                /* 지울개수 input 박스 */
                const delnum = qs("#delnum");
                
                /* 현재배열을 선택박스에 세팅하는 함수 */
                const makeSel = () =>{
                    /* 2. 현재배열 선택박스에 업데이트하기 */

                    anum.innerHTML ="";

                    fruit.forEach((val,idx)=>{
                        anum.innerHTML +=`
                            <option value="${idx}">${val}</option>
                        `; 
                    })
                };
                /* 최초 호출 */
                makeSel();

                /* 11. 중간배열삭제버튼 */
                mbtn[5].onclick = () => {
                    /* 1. 호출확인 */
                    // console.log("중간이야");

                    /* 2. 중간배열 삭제하기 */
                    /* 순번은 현재 배열선택박스(anum)에 있는 value값을 가져옴 */
                    /* 만약 지울값이 빈값이거나 숫자가 아니면 선택순번부터 모두 지우기 */
                    if(delnum.value === " " || isNaN(delnum.value)){
                        fruit.splice(anum.value);
                    }else{ /* delnum이 숫자면 개수만큼 지우기 */
                        fruit.splice(anum.value, delnum.value);
                    }
                    // console.log('anum.value: ', anum.value);
                    
                    /* 3. 배열정보 화면에 출력하기 */
                    showArr();
                    /* 4. 현재배열 선택박스 출력하기*/
                    makeSel();
                
                }

                /* 12. 중간배열삽입버튼 */
                mbtn[6].onclick = ()=>{
                    /* 1. 호출확인 */
                    // console.log("중간 삽입");
                    
                    /* 2. 중간배열 삽입하기 */
                    /* 넣을과일 이름은 과일선택박스에서 선택함 -> sel.value */
                    fruit.splice(anum.value, 0, sel.value);

                    /* 3. 배열정보 화면에 출력하기 */
                    showArr();
                    /* 4. 현재배열 선택박스 출력하기*/
                    makeSel();

                }




                /** [ 배열메서드 ]
                 *  1. join("구분자") - 배열의 요소를 구분자로 구분하여 문자로 출력함
                 *  2. push("값") - 배열의 제일 마지막에 요소 추가
                 *  3. unshift("값") - 배열의 제일 앞에 요소 추가
                 *  4. pop() - 배열의 제일 마지막 요소 제거
                 *  5. shift() - 배열의 첫 번째 요소 제거
                 *  6. splice()
                 *          [ 삭제시 ]
                 *          -> splice(순번) - 순번뒤 요소 모두 제거
                 *          -> splice(순번, 갯수) - 순번요소 부터 갯수만큼 제거
                 *          [ 삽입시 ]
                 *          -> splice(순번, 0, 넣을값, 넣을값,..) - 순번 앞에 넣을 값 삽입
                 */ 
            }); ////////// 로드구역 ////////////////////////
        </script>
    </head>

    <body>
        <h1>배열의 메서드 활용</h1>
        <!-- 배열정보보기 -->
        <h2>배열정보보기</h2>
        <div class="showit"></div>
        <!-- 컨트롤 버튼 -->
        <div class="controler">
            <!-- 과일기능버튼 -->
            <button class="mbtn">과일주세요~!</button> <br />
            <button class="mbtn">뒷배열추가요~!</button>
            <button class="mbtn">앞배열추가요~!</button>
            <button class="mbtn">뒷배열삭제요~!</button>
            <button class="mbtn">앞배열삭제요~!</button> <br />

            <button class="mbtn">중간배열삭제</button>
            <label for="anum">선택과일:</label>
            <select name="anum" id="anum">
                <option>0</option>
            </select>
            <label for="delnum">지울개수:</label>
            <input type="text" id="delnum" value="1" maxlength="1" />
            <br />
            <button class="mbtn">중간배열삽입</button>
            위의 선택번호사용+과일은 리스트에서 선택!
            <!-- 과일선택박스 -->
            <select name="sel" id="sel">
                <option>과일</option>
            </select>
        </div>
        <!-- 출력박스 -->
        <div class="cont"></div>
    </body>
</html>
