<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01. 공유신발 - 뷰사용해보기</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <script>
        $(()=>{

            // 0. 상품정보 생성을 위한 생성자함수
            function GetList(idx, name, img, price){
                this.idx = idx;
                this.name = name;
                this.img = img;
                this.price = price;
            };










            // 1. 뷰JS 인스턴스 생성하기
            const vm = new Vue({
                // 1) 대상선정
                el: "#vapp",  // -> 인스턴스의 루트를 설정함 - 꼭 아이디요소일 필요는 없음 클래스나 일반요소로 쓰면 만나는 첫 번째 대상만 적용함
                // 2) 데이터 설정
                data:{
                    // (1) 제목 데이터
                    bigtit: "<b>공유가 신고 다닌다는!</b>", 
                    // (2) 내용 데이터
                    contxt: `
                        나의 느낌! 네가 아니까!
                        <h2>오늘도 공유는 멋집니다~!</h2>
                        <img src="https://mblogthumb-phinf.pstatic.net/MjAyMDA0MjVfMTAx/MDAxNTg3ODE5MDEzNTA5.p3hCGnZHNY3jPLMhrHy1aXH9t20SLMsdfbnQMAbzY-wg.xfA_E3X5uMPOq3zabKoaITYGZXKkgw5TxEtMjPUmCsAg.PNG.thirdsky30/CropArea0002.png?type=w800" alt="공유">
                    `,
                    // (3) 상품 정보
                    // 데이터를 생성자 함수를 이용해 생성하자
                    sh_data:[], // 배열 리터럴로 선언과 할당
                    // sh_data:[
                    //     {
                    //         idx:1,
                    //         name:"vans_1",
                    //         img:"vans_1.jpg"
                    //     },
                    //     {
                    //         idx:2,
                    //         name:"vans_2",
                    //         img:"vans_2.jpg"
                    //     },
                    //     {
                    //         idx:3,
                    //         name:"vans_3",
                    //         img:"vans_3.jpg"
                    //     },
                    // ]
                },
                // 3) 메서드 설정
                methods:{
                    // 이미지 태그를 만들어서 리턴한다.
                    makeImg(val){
                        return `
                            <img src="./images/${val}" alt="신발">
                        `
                    },
                    //정규식함수(숫자 세자리마다 콤마해주는 기능)
                    numberWithCommas(x) {
                        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    }
                    // myFn: function(){} -> 일반형
                    // myFn: ()=>{} -> 화살표함수형
                    //myFn(){}   -> 메서드형(화살표함수형을 축약함) 
                },
                // 4) 제이쿼리는 어디에 쓰나요..?
                // 뷰JS 인스턴스 생성 라이프사이클에서 가상 DOM과 실제 DOM이 연결생성된 시점에서
                // 실제 DOM을 컨트롤 하는 제이쿼리를 사용한다.
                // -> mounted: function(){코드구역}
                mounted: function(){  // mounted 시 자동 실행구역
                    // 제목이 숨겼다 나옴
                    $(".tit").hide().delay(1000).slideDown(300)
                },   
                
                // 뷰 인스턴스 초기화 완료단계인 created
                // 실행 함수 구역에 데이터 초기세팅을 실시하자
                // created:function(){코드구역}
                created:function(){

                    // 정해진 랜덤 상품명 배열
                    const goods = ["Ever","Final","Star","Shine"];

                    // 상품정보객체 생성자함수 호출하기
                    for(let i =1; i<21; i++){
                        // 정해진 상품명을 랜덤하게 넣기
                        // 배열의 이름 4가지 랜덤수로 선택
                        let rdm1 = Math.floor(Math.random()*4)
                        
                        // 다양한 가격을 위해 1~20 사이 난수 곱하기
                        let rdm2 = Math.ceil(Math.random()*17)+3
                    
                        this.sh_data.push(new GetList(i, goods[rdm1]+`${i}`,`vans_${i}.jpg`, 5300*rdm2))
                    }
                }
            }); /////////////Vue Instance
        })
    </script>
    <style>
        /* 뷰대상박스 */
        #vapp{
            width: 700px;
            padding: 20px;
            border: 1px dashed darkblue;
            border-radius: 20px;
            margin: 0 auto;
            text-align: center;
        }
        /* 제목 */
        .tit{
            color: orangered;
        }
        /* 내용박스 */
        #vapp p{
            border: 4px double gray;
        }
        /* 내용박스 이미지 */
        #vapp  p img{
            border-radius: 20px;
            width: 60%;
        }
        .gwrap{
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .glist{
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .glist img{
            width: 120px;
        }
    </style>
</head>
<body>
    <!-- 뷰JS 대상요소 -->
    <div id="vapp">
        <!-- 1. 제목 -->
        <h1 class="tit" v-html="bigtit"></h1>
        <!-- 
            [ v-text 디렉티브 ]
            -> 해당요소의 데이터로 텍스트를 넣는 디렉티브속성
            -> mustasche 출력은 v-text출력과 같다
            [ v-html 디렉티브 ]
            -> 해당요소의 데이터를 태그로 넣는 디렉티브속성
         -->
        <!-- 2. 내용 -->
        <p v-html="contxt"></p>
        <!-- 3. 상품리스트 -->
        <div class="gwrap">
            <ol class="glist" v-for="(item, idx) in sh_data">
                <!-- 상품 이미지 출력 -->
                <li v-for="(a,b) in item" v-if="b==='img'" v-html="makeImg(a)"></li>
                <!-- 상품명 출력-->
                <li v-for="(a,b) in item" v-if="b==='name'">
                    제품명 : {{a}}
                </li>
                <!-- 가격출력 -->
                <li v-for="(a,b) in item" v-if="b==='price'">
                    가격 : {{numberWithCommas(a)}}원
                </li>
            </ol>
        </div>
    </div>
</body>
</html>