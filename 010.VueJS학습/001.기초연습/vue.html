<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Vue JS 기초</title>
        <!-- 뷰JS 스탠드얼론 버전 가져오기! -->
        <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
        <script>
            window.addEventListener("DOMContentLoaded", () => {
                console.log("로딩완료!");

                // new Vue() 하는 순간 뷰객체가 인스턴스로 메모리에 생성됨.
                // 선택대상 요소가 가상 DOM으로 메모리상에 변경가능하다
                // 1. 텍스트 바인딩 ////////////////////////////////
                new Vue({
                    // 1. el은 적용할 요소 (element)를 담는 속성
                    el: "#app1",
                    // 2. data는 사용할 데이터를 셋업하는 속성
                    data: {
                        message: "나는 뷰JS를 잘 쓰는 프로트엔드 개발자다!",
                        yo: "요",
                    },
                    methods: {
                        // 변경함수
                        chgTxt: function () {
                            // this 키워드를 인스턴스 자신으로 사용할 경우 화살표함수가 아닌
                            // 일반 익명함수로 사용해야함
                            // 화살표 함수는  this키워드가 window를 가리킴
                            console.log("나야나", this.message);
                            this.message = "너는 누구냐?";
                            this.yo = "헐";
                            // 인스턴스 내부 데이터가 변경되면 연결된 부분이 모두 업데이트됨
                        },
                    },
                }); //////////// ////Vue 인스턴스

                // 2. 반복 렌더링 //////////////////////////////
                new Vue({
                    // 1) 대상요소 선정하기
                    el: "#app2",
                    // 2) 데이터 세팅
                    data: {
                        list: ["김수현", "공유", "송강"],
                        //  상품리스트
                        goods: [
                            {
                                상품명: "나이키",
                                코드: "nike3233",
                                가격: "155,000원",
                            },
                            {
                                상품명: "프로스펙스",
                                코드: "pros1213",
                                가격: "75,000원",
                            },
                            {
                                상품명: "아디다스",
                                코드: "adi0999",
                                가격: "255,000원",
                            },
                        ],
                    },
                });

                // 3. 이벤트 사용하기 ////////////////////////
                new Vue({
                    // 대상선정
                    el: "#app3",
                    // 함수기능 구현
                    methods: {
                        // 클릭 시 호출함수
                        myClick: function (e) {
                            // 버튼자신은 어떻게 쓰나?
                            // console.log("버튼자신", event.target);
                            // console.log("버튼자신", event.currentTarget);
                            //  이벤트가 발생한 근본요소 : e.target
                            // 현재 이벤트가 발생한 요소 : e.currentTarget

                            // 1. 버튼 글자 바꾸기
                            e.target.innerText = "놀랐지?";
                            // 2. 잠시후 해당요소(Root)아래에 새로운 html 넣기
                            setTimeout(() => {
                                // 현재 인스턴스 대상요소: this.$el
                                // this는 현재 인스턴스
                                // $el 선택된 요소
                                this.$el.innerHTML += "<div>하하하</div>";
                                // 왜 document.getElementById("app3")로 선택하지 못하는 이유
                                // -> 가상DOM에 세팅된 Vue 인스턴스이기 때문이다.
                            }, 2000);
                        },
                        myOver: function () {
                            // 현재이벤트 대상
                            let cevt = event.currentTarget;
                            // 오버된 버튼 글자 바꾸기
                            cevt.innerText = "오버하지마~!";
                            // 2초후 버튼 글자 또 바꾸기
                            setTimeout(() => {
                                cevt.innerText = "클릭해봐~!";
                            }, 2000);
                        },
                        myClick2: function (txt) {
                            // 기존 인스턴스 루트요소에 html 넣기
                            this.$el.innerHTML += `<h1>내가 ${txt}야!!</h1>`;
                        },
                        myOut: function (e) {
                            e.target.innerText = "오버해봐";
                        },
                    },
                });

                // 4. 입력 양식과 동기화하기 /////////////////
                new Vue({
                    // 대상 선정
                    el:"#app4",
                    // 변수세팅
                    data:{
                        msg:"여기에 입력해봐요~!"
                    }
                });

                // 5. 조건분기하기?/////////////
                new Vue({
                    // 대상선정
                    el:"#app5",
                    data:{
                        show: false,
                        // show변수에  false를 담고 이것을 v-if 조건문 디렉티브에 사용하면
                        // true이면 출력하고 false이면 아예 지운다.
                    }
                })


            }); ////////////// 로드구역 ////////////////////
        </script>
    </head>

    <body>
        <h1>Vue JS 기초연습</h1>

        <hr />

        <h2>1. 텍스트 바인딩(binding->데이터넣기!)</h2>
        <div id="app1">
            <p>{{message}}</p>
            <p>세상은{{yo}} 너희가{{yo}} 아는가{{yo}} 그 세상이{{yo}} 아니란다!{{yo}}</p>
            <!-- 
            {{}} 중복중괄호는 콧수염(Mustache)
            이 부분에 뷰JS 데이터를 넣는 자리다!
            -> 콧수염 표시자는 주로 데이터를 합쳐서 표현할 때 많이 사용됨
            
            - 주의사항 -
            내용으로 표현식만 쓸것!
                예) 표현식은 1+1과 같이 그 자리에 값이 찍히는 것을 표현식이라고 보면됨
                -> 문장은 쓰지 말것
                예)  if문, for문, 할당문, ...   -> if(){}, for(){}, let x = ....
         -->
            <button v-on:click="chgTxt">변경하기</button>
            <!-- 
            [ 뷰JS 인스턴스 내부의 요소 속성만들기 ]
            v- 로 시작하는 속성명을 디렉티브라고 한다.
            예) 
                v-on:이벤트명 = "함수"
                v-bind:value = "값"
                v-if = "코드"
          -->
        </div>

        <hr />

        <h2>2. 반복 렌더링</h2>
        <div id="app2">
            <!-- 단순배열 데이터 -->
            <ol>
                <li v-for="item in list">{{item}}</li>
            </ol>
            <!-- 
            v-for 디렉티브는 뷰JS에서 사용하는 반복구문이다
            반복할 요소에 직접 속성형식으로 사용함
            1. 값 구성: 변수 in  데이터변수
            -> 변수는 내가 지은 이름, in뒤의 데이터변수는 뷰 인스턴스의 data속성에 세팅된 변수
            세팅된 변수가 배열/객체 이다.

            2. 해석:  list에 할당된 개수만큼 돌아서 하씩씩 변수에 넣을 때 mustache가 있는 요소를 반복하여
            화면의 DOM에 반영함

            3. 배열일 경우 전달값 2개
            -> (하나, 둘) in 배열
            ->> 하나 - 배열값, 둘 - 순번
            
            4. 객체일 경우 전달값 2개
            -> (하나, 둘) in 객체
            ->> 하나 - 객체값, 둘 - 속성명
            
            ->>> 배열이든 객체든 반복 시 값만 쓸 경우에는 전달변수를 하나만 써도 무방함! 왜? 첫번째 전달변수가 배열값/객체값 이기 때문이다.
         -->
            <!-- 배열안의 반복되는 객체 데이터 -->
            <ul v-for="(item,i) in goods">
                {{"아이템번호 : "+ (i+1)}}
                <li v-for="(val, name) in item">{{name + " : " + val}}</li>
            </ul>
        </div>

        <hr />

        <h2>3. 이벤트 사용하기</h2>
        <div id="app3">
            <!-- <button v-on:click="myClick">클릭해봐!!</button> -->
            <button @click="myClick">클릭해봐!!</button>
            <!-- 
            v-on:이벤트명="값"
            -> 축약형
            @이벤트명="값"
         -->
            <button @mouseover="myOver" @click="myClick2('후계자')" @mouseout="myOut">오버해봐</button>
        </div>

        <hr />

        <h2>4. 입력 양식과 동기화하기</h2>
        <div id="app4">
            <input type="text" v-model="msg">
            <!-- 
                v-model 디렉티브 속성은 요소 자신의 값이 타겟값으로 반영되게 해준다.
                변경데이터의 뷰JS의 동기화 기능을 확인
             -->
            <p>
                {{msg}}
            </p>
        </div>

        <hr />

        <h2>5. 조건분기</h2>
        <div id="app5">
            <button v-on:click="show = !show">뒤집어!</button>
            <p>
                나는 사실 사람이 아니다 
                <span v-if="show">뻥이요~!</span>
                <!-- 
                    v-if 조건문 디렉티브
                    -> 값으로 쓴 조건에 따라 해당요소가 화면에 출력될지, 출력되지 않을지를 결정할 수 있다.
                    (결과적으로 가상 DOM에서 출력을 하지 않으면 실제 DOM에서는 태그를 그리지 않게  됨.)
                 -->
            </p>
        </div>
    </body>
</html>
